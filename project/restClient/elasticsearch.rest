@hostname = localhost
@port = 9200
@Authorization = eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE1NzkyMjEwNzMsIm5iZiI6MTU3OTIyMTA3MywianRpIjoiOGRkMmU4N2UtOGZhMS00ZDQ0LTg0YTctYzc0ZjAwNjk4MDcxIiwiZXhwIjoxNTc5ODI1ODczLCJpZGVudGl0eSI6eyJ1c2VySUQiOjEsInVzZXJuYW1lIjoiYWRtaW4iLCJ1c2VydHlwZSI6MX0sImZyZXNoIjpmYWxzZSwidHlwZSI6ImFjY2VzcyJ9.ldnpLWBNdGw1p4nfo-N3HIJQN9OITcWWE62pzCkSZ5s
@contentType = application/json


### åˆ›å»ºç´¢å¼• ï¼ˆdatabaseï¼‰
PUT http://{{hostname}}:{{port}}/blog
User-Agent: vscode-restclient
Content-Type: {{contentType}}
# article ç›¸å½“äº type è¡¨ç›¸å½“äº type è¡¨
# properties ç›¸å½“äº æ–‡æ¡£ document çš„ å±æ€§ filed
# è¸©å‘ https://www.cnblogs.com/feiquan/p/11888812.html

{
  "settings": {
    "number_of_shards": 3,
    "number_of_replicas": 1
  },
  "mappings": {
    "properties": {
      "id": {
        "type": "long",
        "store": true
      },
      "title": {
        "type": "text",
        "store": true,
        "index": true,
        "analyzer": "standard"
      },
      "content": {
        "type": "text",
        "store": true,
        "index": true,
        "analyzer": "standard"
      }
    }
  }
}


### è·å–ç”¨æˆ·åˆ—è¡¨ ï¼ˆæ—§çš„å†™æ³•ï¼‰
PUT http://{{hostname}}:{{port}}/blog?include_type_name=true
Authorization: Bearer {{Authorization}}

{
  "settings": {
    "number_of_shards": 3,
    "number_of_replicas": 1
  },
  "mappings": {
    "article": {
      "properties": {
        "id": {
          "type": "long",
          "store": true
        },
        "title": {
          "type": "text",
          "store": true,
          "index": true,
          "analyzer": "standard"
        },
        "content": {
          "type": "text",
          "store": true,
          "index": true,
          "analyzer": "standard"
        }
      }
    }
  }
}

### è®¾ç½® index-hello ä¸­å…·ä½“çš„ type ä¿¡æ¯
POST http://{{hostname}}:{{port}}/index-hello/hello/_mappings
User-Agent: vscode-restclient
Content-Type: {{contentType}}

{
  "hello": {
    "id": {
      "type": "long",
      "store": true
    },
    "title": {
      "type": "text",
      "store": true,
      "index": true,
      "analyzer": "standard"
    },
    "content": {
      "type": "text",
      "store": true,
      "index": true,
      "analyzer": "standard"
    }
  }
}


### åˆ›å»ºdocument
POST http://{{hostname}}:{{port}}/blog/_doc/3
Authorization: Bearer {{Authorization}}
Content-Type: {{contentType}}

{
  "id": 3,
  "title": "åœ¨å®¶åŠå…¬",
  "content": "æ³¨æ„ï¼Œä¸Šé¢çš„ group_by_word_count è¡¨ç¤ºè¯¥èšåˆçš„åç§°ï¼Œæ˜¯è‡ªå®šä¹‰çš„ï¼Œå¯ä»¥è‡ªå·±ä¸ºè¯¥èšåˆå‘½åã€‚"
}


### æŸ¥è¯¢ï¼ˆæ ‡å‡†ï¼šåªèƒ½æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œä¸¤ä¸ªå°±ä¸è¡Œï¼‰
POST http://{{hostname}}:{{port}}/blog/_doc/_search
Content-Type: {{contentType}}

{
  "query": {
    "term": {
      "content": "å½“"
    }
  }
}


### æŸ¥è¯¢ï¼ˆå…³é”®è¯ï¼šå¯ä»¥æ˜¯å¤šä¸ªå­—ç¬¦ä¸²ï¼‰
POST http://{{hostname}}:{{port}}/blog/_doc/_search
Content-Type: {{contentType}}

{
  "query": {
    "query_string": {
      "default_field": "content",
      "query": "å¤§è§„æ¨¡"
    }
  }
}


### æŸ¥çœ‹åˆ†è¯ç»“æœ (v7ç‰ˆæœ¬æœ‰å˜åŒ–). é»˜è®¤æ˜¯ standardã€‚å¯ä»¥å®‰è£… ikã€‚ä½¿ç”¨ ik_smart | ik_max_word
POST http://{{hostname}}:{{port}}/_analyze
Content-Type: {{contentType}}

{
  "analyzer": "ik_smart",
  "text": "ç«¯æ­£åå§¿ï¼Œå¥½å¥½ä¸Šç­"
}


### æ·»åŠ ä¿®æ”¹æ•°æ®
POST http://{{hostname}}:{{port}}/people/_doc/4
Content-Type: {{contentType}}

{
  "name" : "å°ç”·",
  "age" : 22,
  "sex": "ç”·"
}


### è·å–æ•°æ®
GET http://{{hostname}}:{{port}}/people/_doc/2
Content-Type: {{contentType}}


### æŸ¥è¯¢æ‰€æœ‰
GET http://{{hostname}}:{{port}}/people/_search
Content-Type: {{contentType}}


### åŒ¹é…æŸ¥è¯¢
GET http://{{hostname}}:{{port}}/people/_search
Content-Type: {{contentType}}

{
  "query": {
    "match": {
      "sex": "ç”·"
    }
  }
}


### è¯æ¡åŒ¹é…ï¼ˆç²¾ç¡®æŸ¥æ‰¾ï¼‰ term è¢«ç”¨äºç²¾ç¡®å€¼ åŒ¹é…ã€‚ ä½¿ç”¨åªèƒ½æ˜¯ termï¼š{"sex": "ç”·"} ä¸èƒ½æ˜¯æ•°ç»„
### _source ç”¨äºè¿‡æ»¤å­—æ®µ
GET http://{{hostname}}:{{port}}/people/_search
Content-Type: {{contentType}}

{
  "query": {
    "terms": {
      "sex": ["ç”·", "å¥³"]
    }
  },
  "_source": "name"
}


###  NOTE:  ç¬¬äºŒéƒ¨åˆ†ï¼šé›†ç¾¤

### ğŸˆé›†ç¾¤ï¼Œåˆ›å»ºç´¢å¼• æ˜ å°„
PUT http://{{hostname}}:9201/blog/_mapping
User-Agent: vscode-restclient
Content-Type: {{contentType}}

{
  "properties": {
    "id": {
      "type": "long",
      "store": true
    },
    "title": {
      "type": "text",
      "store": true,
      "analyzer": "ik_smart"
    },
    "content": {
      "type": "text",
      "store": true,
      "analyzer": "ik_smart"
    }
  }
}

### æ·»åŠ æ•°æ®
POST http://{{hostname}}:9201/blog/_doc/4
User-Agent: vscode-restclient
Content-Type: {{contentType}}

{
  "id": 4,
  "title": "å¿«é€’å…¬å¸å…¨é¢å¤å·¥",
  "content": "å°½ç®¡æˆªæ­¢åˆ°2æœˆ10æ—¥(ä»Šå¤©)å„å¤§å¿«é€’å…¬å¸å…¨é¢å¤å·¥,ä½†æ˜¯â€œç”¨å·¥è’â€é—®é¢˜ä»æ—§ååˆ†å‡¸æ˜¾ã€‚æ®å›½å®¶é‚®æ”¿å±€2019å¹´å‘å¸ƒçš„å¿«é€’å‘˜ç”Ÿå­˜ç°çŠ¶è°ƒæŸ¥æŠ¥å‘Š,76.31%çš„å¿«é€’å‘˜"
}
